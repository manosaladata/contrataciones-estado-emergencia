install.packages("xlsx")
setwd("D:/GITHUB-PROYECTOS BEST")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx",sheet = 1)
library(xlsx)
setwd("D:/GITHUB-PROYECTOS BEST")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx",sheet = 1)
library(xlsx)
library(readxl)
install.packages("xlsx")
library(xlsx)
setwd("D:/GITHUB-PROYECTOS BEST")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx",sheet = 1)
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R")
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx",sheet = 1)
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R")
library(xlsx)
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
library(tint)
# invalidate cache when the package version changes
knitr::opts_chunk$set(tidy = FALSE, cache.extra = packageVersion('tint'))
options(htmltools.dir.version = FALSE)
library(readxl)
library(correlation)
library(tidyverse)
library(esquisse)                        #Gráficos simples sin código.
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/Data")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
#names(contr_direc)
contr_direc[,28]<-sapply(contr_direc[,28],function(x)x/1000000)
names(contr_direc)[28]="MONTO_SOLES_EN_MILLONES"
#names(contr_direc)
options(scipen=999)                                  #Evita que salga en notación científica (exponencial).
#sapply(contr_direc, class)                          #Analizamos la clase de cada columna. Ojo: FECHACONVOCATOERIA ESTÁ EN POSIXct y POSIxt q es formato de fecha
boxplot(contr_direc$"MONTO_SOLES_EN_MILLONES")
zonas<- select(contr_direc, "ENTIDAD_DEPARTAMENTO","MONTO_SOLES_EN_MILLONES")
zonas  %>%
group_by(ENTIDAD_DEPARTAMENTO) %>%
summarise(MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())%>%
arrange(desc(num_contr))%>%                                    #No usar string, lo lee como tal.
View()
zonas %>%
group_by(ENTIDAD_DEPARTAMENTO) %>%
summarise(MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),numero=n())%>%
arrange(desc(MONTOADJUDICADOSOLES))%>%
view()
library(tint)
# invalidate cache when the package version changes
knitr::opts_chunk$set(tidy = FALSE, cache.extra = packageVersion('tint'))
options(htmltools.dir.version = FALSE)
zonas2<-zonas %>%
group_by(ENTIDAD_DEPARTAMENTO) %>%
summarise(MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),numero=n())%>%
arrange(desc(MONTOADJUDICADOSOLES))%>%
zonas2<-zonas %>%
group_by(ENTIDAD_DEPARTAMENTO) %>%
summarise(MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),numero=n())%>%
arrange(desc(MONTOADJUDICADOSOLES))%>%
library(readxl)
library(readxl)
library(correlation)
library(tidyverse)
library(esquisse)                        #Gráficos simples sin código.
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/Data")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
#names(contr_direc)
contr_direc[,28]<-sapply(contr_direc[,28],function(x)x/1000000)
names(contr_direc)[28]="MONTO_SOLES_EN_MILLONES"
#names(contr_direc)
options(scipen=999)                                  #Evita que salga en notación científica (exponencial).
#sapply(contr_direc, class)                          #Analizamos la clase de cada columna. Ojo: FECHACONVOCATOERIA ESTÁ EN POSIXct y POSIxt q es formato de fecha
boxplot(contr_direc$"MONTO_SOLES_EN_MILLONES")
zonas<- select(contr_direc, "ENTIDAD_DEPARTAMENTO","MONTO_SOLES_EN_MILLONES")
zonas2<-zonas  %>%
group_by(ENTIDAD_DEPARTAMENTO) %>%
summarise(MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())%>%
arrange(desc(num_contr))%>%
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas3<-summarise(MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES))
zonas3<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES))
View(zonas3)
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES,num_contr=n()))
zonas2<-arrange(zonas2,desc(num_contr))
View(zonas2)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES,num_contr=n()))
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES))
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES,num_contr=n()))
View(zonas2)
#Veamos los montos por departamentos
zonas<- select(contr_direc, "ENTIDAD_DEPARTAMENTO","MONTO_SOLES_EN_MILLONES")
#Ordenamos de acuerdo al número de contratos
zonas  %>%
group_by(ENTIDAD_DEPARTAMENTO) %>%
summarise(MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())%>%
arrange(desc(num_contr))%>%                                    #No usar string, lo lee como tal.
View()
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas2<-summarise(zonas2,num_contr=n()))
zonas2<-summarise(zonas2,num_contr=n())
View(zonas2)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())
View(zonas2)
zonas2<-arrange(zonas2,desc(num_contr))
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())
zonas2<-arrange(zonas2,desc(num_contr))
knitr::kable(zonas2)
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())
zonas2<-arrange(zonas2,desc(num_contr))
knitr::kable(
zonas2, caption = 'De acuerdo al número de contratos.'
)
zonas<- select(contr_direc, "ENTIDAD_DEPARTAMENTO","MONTO_SOLES_EN_MILLONES")
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())
zonas_num<-arrange(zonas2,desc(num_contr))
zonas_num<-head(zonas2_num,4)
zonas<- select(contr_direc, "ENTIDAD_DEPARTAMENTO","MONTO_SOLES_EN_MILLONES")
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())
zonas_num<-arrange(zonas2,desc(num_contr))
zonas_num<-head(zonas_num,4)
View(contr_direc)
names(contr_direc)
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
library(readxl)
library(correlation)
library(tidyverse)
library(esquisse)                        #Gráficos simples sin código.
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/Data")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
#names(contr_direc)
contr_direc[,28]<-sapply(contr_direc[,28],function(x)x/1000000)
names(contr_direc)[28]="MONTO_SOLES_EN_MILLONES"
names(contr_direc)[31]="RUCPROV"
#names(contr_direc)
options(scipen=999)                                  #Evita que salga en notación científica (exponencial).
#sapply(contr_direc, class)                          #Analizamos la clase de cada columna. Ojo: FECHACONVOCATOERIA ESTÁ EN POSIXct y POSIxt q es formato de fecha
boxplot(contr_direc$"MONTO_SOLES_EN_MILLONES")
library(shiny); runApp('shiny.R')
runApp('shiny.R')
#LIMA
library(tint)
library(knitr)
library(readxl)
library(correlation)
library(tidyverse)
library(esquisse)                        #Gráficos simples sin código.
#install.packages("data.table")
library("data.table")
library(DT)
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/Data")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
#names(contr_direc)
contr_direc[,28]<-sapply(contr_direc[,28],function(x)x/1000000)
names(contr_direc)[28]="MONTO_SOLES_EN_MILLONES"
names(contr_direc)[31]="RUCPROV"
#names(contr_direc)
options(scipen=999)                                  #Evita que salga en notación científica (exponencial).
#sapply(contr_direc, class)                          #Analizamos la clase de cada columna. Ojo: FECHACONVOCATOERIA ESTÁ EN POSIXct y POSIxt q es formato de fecha
boxplot(contr_direc$"MONTO_SOLES_EN_MILLONES")
#ANÁLISIS DEPARTAMENTAL
#DE ACUERDO AL NÚMERO DE CONTRATOS
lima<-filter(contr_direc,ENTIDAD_DEPARTAMENTO=="LIMA")
#zonas_fil<- select(lima, "ENTIDAD_DEPARTAMENTO","MONTO_SOLES_EN_MILLONES")
zonas2<-group_by(lima,PROVEEDOR,RUCPROV)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())
zonas_num<-arrange(zonas2,desc(num_contr))
install.packages("formattable")
library(formattable)
customGreen0 = "#DeF7E9"
customGreen = "#71CA97"
customRed = "#ff7f7f"
formattable(zonas2, align =c("l","c","c","c","c", "c", "c", "c", "r"), list( ###con align alineamos
`MONTOADJUDICADOSOLES`= color_tile(customGreen, customGreen0),
`num_contr`= formatter("span", style = ~ style(color = ifelse(`num_contr` <= 3, "green","red")),
~ icontext(ifelse(`num_contr` <= 3, "thumbs-up", "thumbs-down"),`num_contr`)))) ###(condición, dato)
#library(paletteer)
# head(zonas2)
#
# b<-datatable(zonas2) %>%                          #definimos el datatable zonas2 que tiene los número de contratos
#   formatStyle(columns="num_contr",
#               #color = 'red',
#               background = styleInterval(c(4.9), c("white", "orange")),
#               color = styleInterval(c(4.9),c("black", 'red')))
#
#
# print(b)
# #
library(shiny); runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny - copia.R')
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/Data")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
#names(contr_direc)
contr_direc[,28]<-sapply(contr_direc[,28],function(x)x/1000000)
names(contr_direc)[28]="MONTO_SOLES_EN_MILLONES"
view(contr_direc)
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny - copia.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny - copia.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny - copia.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny - copia.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny - copia.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny - copia.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny.R')
library(shiny)
library(shinydashboard)
library(readxl)
library(tidyverse)
library(formattable)
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/Data")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
#names(contr_direc)
contr_direc[,28]<-sapply(contr_direc[,28],function(x)x/1000000)
names(contr_direc)[28]="MONTO_SOLES_EN_MILLONES"
#view(contr_direc)
names(contr_direc)[31]="RUCPROV"
#names(contr_direc)
options(scipen=999)                                  #Evita que salga en notación científica (exponencial).
#sapply(contr_direc, class)
proveedores<- select(contr_direc, "PROVEEDOR","ENTIDAD", "RUCPROV", "TIPOPROVEEDOR","MONTO_SOLES_EN_MILLONES")
proveedores2_num<-group_by(proveedores,PROVEEDOR,RUCPROV, MONTO_SOLES_EN_MILLONES)
proveedores2_num<-summarize(proveedores2_num,MONTOADJSOLES= sum(MONTO_SOLES_EN_MILLONES), Contratos=n())
#proveedores2_num<-summarize(proveedores2_num,MONTOADJSOLES= sum(MONTO_SOLES_EN_MILLONES), Contratos=n())
#proveedores2_format<-proveedores2_num
proveedores2_num<-arrange(proveedores2_num,desc(Contratos))
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
#names(contr_direc)
contr_direc[,28]<-sapply(contr_direc[,28],function(x)x/1000000)
names(contr_direc)[28]="MONTO_SOLES_EN_MILLONES"
#view(contr_direc)
names(contr_direc)[31]="RUCPROV"
#names(contr_direc)
options(scipen=999)                                  #Evita que salga en notación científica (exponencial).
#sapply(contr_direc, class)
proveedores<- select(contr_direc, "PROVEEDOR","ENTIDAD", "RUCPROV", "TIPOPROVEEDOR","MONTO_SOLES_EN_MILLONES")
proveedores2_num<-group_by(proveedores,PROVEEDOR,RUCPROV, MONTO_SOLES_EN_MILLONES)
proveedores2_num<-summarize(proveedores2_num,MONTOADJSOLES= sum(MONTO_SOLES_EN_MILLONES), Contratos=n())
#proveedores2_num<-summarize(proveedores2_num,MONTOADJSOLES= sum(MONTO_SOLES_EN_MILLONES), Contratos=n())
#proveedores2_format<-proveedores2_num
proveedores2_num<-arrange(proveedores2_num,desc(Contratos))
#names(contr_direc)
contr_direc[,28]<-sapply(contr_direc[,28],function(x)x/1000000)
#view(contr_direc)
names(contr_direc)[31]="RUCPROV"
#names(contr_direc)
options(scipen=999)                                  #Evita que salga en notación científica (exponencial).
proveedores<- select(contr_direc, "PROVEEDOR","ENTIDAD", "RUCPROV", "TIPOPROVEEDOR","MONTO_SOLES_EN_MILLONES")
proveedores2_num<-group_by(proveedores,PROVEEDOR,RUCPROV, MONTO_SOLES_EN_MILLONES)
proveedores2_num<-summarize(proveedores2_num,MONTOADJSOLES= sum(MONTO_SOLES_EN_MILLONES), Contratos=n())
#proveedores2_num<-summarize(proveedores2_num,MONTOADJSOLES= sum(MONTO_SOLES_EN_MILLONES), Contratos=n())
#proveedores2_format<-proveedores2_num
proveedores2_num<-arrange(proveedores2_num,desc(Contratos))
proveedores2_num<-arrange(proveedores2_num,desc(Contratos))
view(proveedores2_num)
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny - copia.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny - copia.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny - copia.R')
runApp('D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/R/shiny.R')

#lat <- remote_driver$findElement(using = "id", value="lat")$getElementAttribute("value")
address_textfield
Page<-Browser$getPageSource()
Pagina<-read_html(url)
Pagina
pag_text<-Pagina%>%
html_nodes(css= ".data-container")%>%
html_text()
pag_text
# address_textfield$sendKeysToElement(list(""))
# find_button <- remote_driver$findElement(using = 'class', value = "button")
# find_button$clickElement()
#lat <- remote_driver$findElement(using = "id", value="lat")$getElementAttribute("value")
ses_rvest <- html_session("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
paises <- ses_rvest %>%
html_nodes(css= ".data-container") %>% # el :not() encierra una clase
html_text()            # específica que quiero excluir
paises
#Creamos una variable que nos permita entrar al browser, con rsDriver abrimos una ventana.
#A diferencia del remoteDriver el rsDriver requiere que tengas al rJava instalado (por ende el Java).
driver <- rsDriver(browser=c("chrome"), chromever="86.0.4240.22")
remote_driver <- driver[["client"]]
remote_driver$open()
# address_textfield$sendKeysToElement(list(""))
# find_button <- remote_driver$findElement(using = 'class', value = "button")
# find_button$clickElement()
#lat <- remote_driver$findElement(using = "id", value="lat")$getElementAttribute("value")
ses_rvest <- html_session("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
paises <- ses_rvest %>%
html_nodes(css= ".data-container") %>% # el :not() encierra una clase
html_text()            # específica que quiero excluir
paises
ses_rvest <- html_session("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
paises <- ses_rvest %>%
html_nodes("div.data-container>ul>li") %>% # el :not() encierra una clase
html_text()            # específica que quiero excluir
paises
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
# address_textfield$sendKeysToElement(list(""))
# find_button <- remote_driver$findElement(using = 'class', value = "button")
# find_button$clickElement()
#lat <- remote_driver$findElement(using = "id", value="lat")$getElementAttribute("value")
ses_rvest <- html_session("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
paises <- ses_rvest %>%
html_nodes("div.data-container>ul>li") %>% # el :not() encierra una clase
html_text()            # específica que quiero excluir
paises
# address_textfield$sendKeysToElement(list(""))
# find_button <- remote_driver$findElement(using = 'class', value = "button")
# find_button$clickElement()
#lat <- remote_driver$findElement(using = "id", value="lat")$getElementAttribute("value")
ses_rvest <- html_session("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
paises <- ses_rvest %>%
html_nodes(".data-container") %>% # el :not() encierra una clase
html_text()            # específica que quiero excluir
paises
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
address_textfield <- remote_driver$findElement(using = 'class', value = 'container')
Page<-Browser$getPageSource()
paises <- Page %>%
html_nodes(".data-container") %>% # el :not() encierra una clase
html_text()
paises <- ses_rvest %>%
html_nodes(".data-container") %>% # el :not() encierra una clase
html_text()            # específica que quiero excluir
paises
address_textfield <- remote_driver$findElement(using = 'class', value = 'container')
Page<-Browser$getPageSource()
driver <- rsDriver(browser=c("chrome"), chromever="86.0.4240.22")
remote_driver <- driver[["client"]]
remote_driver$open()
#binman::list_versions("chromedriver")  #Selenium creo
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
address_textfield <- remote_driver$findElement(using = 'class', value = 'container')
Page<-Browser$getPageSource()
Browser$screenshot(display=TRUE)
Pagina_actual<-Browser$getPageSource()
driver <- rsDriver(browser=c("chrome"), chromever="86.0.4240.22")
remote_driver <- driver[["client"]]
remote_driver$open()
#binman::list_versions("chromedriver")  #Selenium creo
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
Browser <- remote_driver$findElement(using = 'class', value = 'container')
Page<-Browser$getPageSource()
Browser$screenshot(display=TRUE)
Pagina_actual<-Browser$getPageSource()
Pagina<-read_html(Pagina_actual[[1]])
paises <- Pagina<-read_html(Pagina_actual[[1]]) %>%
html_nodes(".data-container") %>% # el :not() encierra una clase
html_text()            # específica que quiero excluir
paises
library(RSelenium)
library(wdman)
library(rJava)
library(rvest)
url<-"https://www.latlong.net/"
#Creamos una variable que nos permita entrar al browser, con rsDriver abrimos una ventana.
#A diferencia del remoteDriver el rsDriver requiere que tengas al rJava instalado (por ende el Java).
driver <- rsDriver(browser=c("chrome"), chromever="86.0.4240.22")
remote_driver <- driver[["client"]]
remote_driver$open()
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
Browser <- remote_driver$findElement(using = 'class', value = 'container')
Page<-Browser$getPageSource()
Browser$screenshot(display=TRUE)
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
#Creamos una variable que nos permita entrar al browser, con rsDriver abrimos una ventana.
#A diferencia del remoteDriver el rsDriver requiere que tengas al rJava instalado (por ende el Java).
driver <- rsDriver(browser=c("chrome"), chromever="86.0.4240.22")
remote_driver <- driver[["client"]]
remote_driver$open()
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038/#inhabMJ")
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038#inhabMJ")
#Creamos una variable que nos permita entrar al browser, con rsDriver abrimos una ventana.
#A diferencia del remoteDriver el rsDriver requiere que tengas al rJava instalado (por ende el Java).
driver <- rsDriver(browser=c("chrome"), chromever="86.0.4240.22")
remote_driver <- driver[["client"]]
remote_driver$open()
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038#inhabMJ")
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/estadistica/20293847038#penalidades")
remote_driver$navigate("https://apps.osce.gob.pe/perfilprov-ui/ficha/20293847038")
load("D:/Git Hub-BEST/contrataciones-estado-emergencia/Data/sanciones_scrap.RData")
library(tidyverse)  #Usaremos en tibble
library(readxl)
library(xml2)  #Para leer html.
library(rvest)
library(RSelenium)  #Pra trabajar con páginas dinámicas
library(wdman)    #Navegador fantasma, permite usar rsDriver
library(robotstxt)
#library(strip)
library(gdata)
#WEB SCRAPING
server<-phantomjs(port=5015L)
#Sys.sleep(8)
scrap<-function(ruc) {
if(nchar(ruc)!=11){a<-NA}
else{
UrlMadre<-paste0("https://apps.osce.gob.pe/perfilprov-ui/estadistica/",ruc,"#inhabMJ")
paths_allowed(paths = c(UrlMadre)) # TRUE
options(encoding = "utf-8")
Browser <- remoteDriver(browserName = "phantomjs", port=5015L) #browserName = "edge"
Sys.sleep(5)
Browser$open()
Sys.sleep(5)
Browser$navigate(paste(UrlMadre))#,RUCs[1],"#sanciones")) #AQUÍ SALE EL ERROR
Sys.sleep(5)
Browser$screenshot(display=TRUE)
Sys.sleep(5)
Pagina_actual<-Browser$getPageSource()
Pagina<-read_html(Pagina_actual[[1]])  #Por el "xml2"
PaginaRUC<-read_html(Pagina_actual[[1]])
pag_text<-PaginaRUC%>%
html_nodes(css= ".data-container")%>%
html_text()
pag_text}
}
#DEFINIMOS FUNCIONES
sanciones<- function(ruc){
text<-scrap(ruc)
if (is.na(text)){a<-NA} else{
sanciones<-str_match(text, "Sanciones del TCE (\\s*(.*?)\\s*)El proveedor") #tidyverse
sanciones<-strsplit(sanciones, "")
sanciones <-as.numeric(sanciones[[2]][2])
sanciones}}
penalidades<- function(ruc){
text<-scrap(ruc)
penalidades<-str_match(text, "Penalidades (\\s*(.*?)\\s*)El proveedor") #tidyverse
penalidades<-strsplit(penalidades, "")
penalidades<-as.numeric(penalidades[[2]][2])
penalidades}
penalidades("233")
penalidades("233")
penalidades("23334")
penalidades("20555589574")
penalidades5<-sapply(data5$RUCPROV,penalidades)
penalidades6<-sapply(data6$RUCPROV,penalidades)
#WEB SCRAPING
server<-phantomjs(port=5015L)
penalidades6<-sapply(data6$RUCPROV,penalidades)
penalidades7<-sapply(data7$RUCPROV,penalidades)
#WEB SCRAPING
server<-phantomjs(port=5015L)
penalidades7<-sapply(data7$RUCPROV,penalidades)
penalidades8<-sapply(data8$RUCPROV,penalidades)
#WEB SCRAPING
server<-phantomjs(port=5015L)
penalidades8<-sapply(data8$RUCPROV,penalidades)
penalidades9<-sapply(data9$RUCPROV,penalidades)
#WEB SCRAPING
server<-phantomjs(port=5015L)
penalidades9<-sapply(data9$RUCPROV,penalidades)
penalidades6
penalidadess7
penalidades7
penalidades8
penalidades("20118848579")
debugSource('D:/Git Hub-BEST/contrataciones-estado-emergencia/R/func_scrap.R', encoding = 'UTF-8', echo=TRUE)
penalidades6<-sapply(data6$RUCPROV,penalidades)
#WEB SCRAPING
server<-phantomjs(port=5015L)
penalidades6<-sapply(data6$RUCPROV,penalidades)
penalidades7<-sapply(data7$RUCPROV,penalidades)
penalidades6
penalidades7<-sapply(data7$RUCPROV,penalidades)
#WEB SCRAPING
server<-phantomjs(port=5015L)
penalidades7<-sapply(data7$RUCPROV,penalidades)
penalidades7
penalidades8<-sapply(data8$RUCPROV,penalidades)
#WEB SCRAPING
server<-phantomjs(port=5015L)
penalidades10<-sapply(data10$RUCPROV,penalidades)
save.image("D:/Git Hub-BEST/contrataciones-estado-emergencia/Data/sanciones_scrap.RData")
library(tidyverse)  #Usaremos en tibble
library(readxl)
library(xml2)  #Para leer html.
library(rvest)
library(RSelenium)  #Pra trabajar con páginas dinámicas
library(wdman)    #Navegador fantasma, permite usar rsDriver
library(robotstxt)
#library(strip)
library(gdata)
#WEB SCRAPING
server<-phantomjs(port=5015L)
#Sys.sleep(8)
scrap<-function(ruc) {
if(nchar(ruc)!=11){a<-NA}
else{
UrlMadre<-paste0("https://apps.osce.gob.pe/perfilprov-ui/estadistica/",ruc,"#inhabMJ")
paths_allowed(paths = c(UrlMadre)) # TRUE
options(encoding = "utf-8")
Browser <- remoteDriver(browserName = "phantomjs", port=5015L) #browserName = "edge"
Sys.sleep(5)
Browser$open()
Sys.sleep(5)
Browser$navigate(paste(UrlMadre))#,RUCs[1],"#sanciones")) #AQUÍ SALE EL ERROR
Sys.sleep(5)
Browser$screenshot(display=TRUE)
Sys.sleep(5)
Pagina_actual<-Browser$getPageSource()
Pagina<-read_html(Pagina_actual[[1]])  #Por el "xml2"
PaginaRUC<-read_html(Pagina_actual[[1]])
pag_text<-PaginaRUC%>%
html_nodes(css= ".data-container")%>%
html_text()
pag_text}
}
#DEFINIMOS FUNCIONES
sanciones<- function(ruc){
text<-scrap(ruc)
if (is.na(text)){a<-NA} else{
sanciones<-str_match(text, "Sanciones del TCE (\\s*(.*?)\\s*)El proveedor") #tidyverse
sanciones<-strsplit(sanciones, "")
sanciones <-as.numeric(sanciones[[2]][2])
sanciones}}
penalidades<- function(ruc){
text<-scrap(ruc)
penalidades<-str_match(text, "Penalidades (\\s*(.*?)\\s*)El proveedor") #tidyverse
penalidades<-strsplit(penalidades, "")
penalidades<-as.numeric(penalidades[[2]][2])
penalidades}
penalidades11<-sapply(data11$RUCPROV,penalidades)
penalidades12<-sapply(data12$RUCPROV,penalidades)
#WEB SCRAPING
server<-phantomjs(port=5015L)
penalidades12<-sapply(data12$RUCPROV,penalidades)
penalidades13<-sapply(data13$RUCPROV,penalidades)
#WEB SCRAPING
server<-phantomjs(port=5015L)
penalidades13<-sapply(data13$RUCPROV,penalidades)
save.image("D:/Git Hub-BEST/contrataciones-estado-emergencia/Data/sanciones_scrap.RData")
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
sanciones1
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
data.frame(sanciones1)
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
data.frame(sanciones1,sanciones2)
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
data.frame(sanciones1,sanciones2)
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
rbind(data.frame(sanciones1),data.frame(sanciones2))
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
cbind(data.frame(sanciones1),data.frame(sanciones2))
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
rbind(data.frame(sanciones1),data.frame(sanciones2))
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
c(data.frame(sanciones1),data.frame(sanciones2))
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
c(sanciones1,sanciones2)
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
c(sanciones1,sanciones2,sanciones3,sanciones4,sanciones5,sanciones6,ssanciones7,
sanciones8,sanciones9,sanciones10,sanciones11,sanciones12,sanciones13)
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
c(sanciones1,sanciones2,sanciones3,sanciones4,sanciones5,sanciones6,sanciones7,
sanciones8,sanciones9,sanciones10,sanciones11,sanciones12,sanciones13)
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
data.frame(c(sanciones1,sanciones2,sanciones3,sanciones4,sanciones5,sanciones6,sanciones7,
sanciones8,sanciones9,sanciones10,sanciones11,sanciones12,sanciones13))
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
length(data.frame(c(sanciones1,sanciones2,sanciones3,sanciones4,sanciones5,sanciones6,sanciones7,
sanciones8,sanciones9,sanciones10,sanciones11,sanciones12,sanciones13)))
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
sanciones_num<-data.frame(c(sanciones1,sanciones2,sanciones3,sanciones4,sanciones5,sanciones6,sanciones7,
sanciones8,sanciones9,sanciones10,sanciones11,sanciones12,sanciones13))
data.frame(c(data1,data2,data3,data4,data5,data6,data7,
data8,data9,data10,data11,data12,data13))
##################################################
######################UNIÓN Y LIMPIEZA#################
################################################
class(data1)
c(data1,data2,data3,data4,data5,data6,data7,
data8,data9,data10,data11,data12,data13)
rbind(data1,data2,data3,data4,data5,data6,data7,
data8,data9,data10,data11,data12,data13)
data_520<-rbind(data1,data2,data3,data4,data5,data6,data7,
data8,data9,data10,data11,data12,data13)
data_520<-as.data.frame(proveedores2_num[c(1:520,)])
proveedores2_num[c(1:520,)]
View(proveedores2_num)
data_520<-as.data.frame(proveedores2_num[c(1:520,1:4)])
data_520<-as.data.frame(proveedores2_num[c(1:520),])
data_520
penas_num<-data.frame(c(penalidades1,penalidades2,penalidades3,penalidades4,penalidades5,penalidades6,penalidades7,
penalidades8,penalidades9,penalidades10,penalidades11,penalidades12,penalidades13))
penas_num
penalidades13
penalidades13<-sapply(data13$RUCPROV,penalidades)
#WEB SCRAPING
server<-phantomjs(port=5015L)
penalidades13<-sapply(data13$RUCPROV,penalidades)
penalidades13
penas_num<-data.frame(c(penalidades1,penalidades2,penalidades3,penalidades4,penalidades5,penalidades6,penalidades7,
penalidades8,penalidades9,penalidades10,penalidades11,penalidades12,penalidades13))
penas_num
cbind(data_520,sanciones_num,penas_num)
View(cbind(data_520,sanciones_num,penas_num))
view(penas_num)
df_sanc_pena<-cbind(data_520,sanciones_num,penas_num)
df_sanc_pena
View(df_sanc_pena)
names(df_sanc_pena)
names(df_sanc_pena)<-c("PROVEEDOR","RUCPROV","MONTO TOTAL ADJUDICADO (mill) ","SANCIONES DEL TCE",
"PENALIDAD POR INCUMPLIMIENTO")
View(df_sanc_pena)
#names(df_sanc_pena)
#df_sanc_pena<-df_sanc_pena[,c(1,2,3,4,5,6)]
names(df_sanc_pena)<-c("PROVEEDOR","RUCPROV","MONTO TOTAL ADJUDICADO (millones) ","SANCIONES DEL TCE",
"PENALIDAD POR INCUMPLIMIENTO")
View(df_sanc_pena)
sample_n(df_sanc_pena,10)
sample_n(df_sanc_pena,10)
sample(df_sanc_pena,10)
sample_n(df_sanc_pena,size=10)
class(df_sanc_pena)
df_sanc_pena[sample(nrow(df_sanc_pena), 3),]
View(df_sanc_pena[sample(nrow(df_sanc_pena), 3),]) #Una muestra de 10 datos para revisar
View(df_sanc_pena)
data_520[-1]
data_520
View(data_520[-1])
View(data_520)
names(df_sanc_pena)
df_sanc_pena<-cbind(data_520,sanciones_num,penas_num)
View(df_sanc_pena)
view(penas_num)
#La primera columna de RUCS no me sirve (viene de sanciones_num y penas_num)
#Procedemos a eliminarla
names(df_sanc_pena)
df_sanc_pena<-cbind(data_520,sanciones_num,penas_num)
View(df_sanc_pena)
#La primera columna de RUCS no me sirve (viene de sanciones_num y penas_num)
#Procedemos a eliminarla
names(df_sanc_pena)
df_sanc_pena[-1]
View(df_sanc_pena[-1])
#df_sanc_pena<-df_sanc_pena[,c(1,2,3,4,5,6)]
names(df_sanc_pena)<-c("RUCS", "PROVEEDOR","RUCPROV","MONTO TOTAL ADJUDICADO (millones) ","SANCIONES DEL TCE",
"PENALIDAD POR INCUMPLIMIENTO")
View(df_sanc_pena)
#df_sanc_pena<-df_sanc_pena[,c(1,2,3,4,5,6)]
names(df_sanc_pena)<-c("PROVEEDOR","RUCPROV","MONTO TOTAL ADJUDICADO (millones) ","SANCIONES DEL TCE",
"PENALIDAD POR INCUMPLIMIENTO")
View(df_sanc_pena)
df_sanc_pena<-cbind(data_520,sanciones_num,penas_num)
View(df_sanc_pena)
#View(df_sanc_pena)
names(df_sanc_pena)
#df_sanc_pena<-df_sanc_pena[,c(1,2,3,4,5,6)]
names(df_sanc_pena)<-c("PROVEEDOR","RUCPROV","MONTO TOTAL ADJUDICADO (millones) ","NÚMERO DE CONTRATOS",
"SANCIONES DEL TCE","PENALIDAD POR INCUMPLIMIENTO")
class(df_sanc_pena)
View(df_sanc_pena)
View(df_sanc_pena[sample(nrow(df_sanc_pena), 10),]) #Una muestra de 10 datos para revisar
#GUARDAMOS NUEVA DATA:
write.table(df_sanc_pena, "DATOS_Webscr", sep= ";",row.names=FALSE)
setwd("D:/Git Hub-BEST/contrataciones-estado-emergencia/R")
###########################################
####################DATA INSUMO#############
###########################################
setwd("D:/Git Hub-BEST/contrataciones-estado-emergencia/Data")
#GUARDAMOS NUEVA DATA:
write.table(df_sanc_pena, "DATOS_Webscr", sep= ";",row.names=FALSE)
#df_sanc_pena<-df_sanc_pena[,c(1,2,3,4,5,6)]
names(df_sanc_pena)<-c("PROVEEDOR","RUCPROV","MONTO TOTAL ADJUDICADO (millones) ","NUMERO DE CONTRATOS",
"SANCIONES DEL TCE","PENALIDAD POR INCUMPLIMIENTO")
class(df_sanc_pena)
View(df_sanc_pena)
View(df_sanc_pena[sample(nrow(df_sanc_pena), 10),]) #Una muestra de 10 datos para revisar
#GUARDAMOS NUEVA DATA:
write.table(df_sanc_pena, "DATOS_Webscr", sep= ";",row.names=FALSE)
save.image("D:/Git Hub-BEST/contrataciones-estado-emergencia/Data/sancionesypenalidades.RData")
setwd("D:/Git Hub-BEST/contrataciones-estado-emergencia/Data")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
setwd("D:/Git Hub-BEST/contrataciones-estado-emergencia/Data")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
data_api <- read_csv("DATOS_api")
data_api <- read_csv("DATOS_api.csv")
View(data_api)
data_api <- read_excel("DATOS_api.xlsx")
data_api <- read_excel("DATOS_api.csv")
data_api <- read_csv("DATOS_api.csv")
data_api <- read.csv("DATOS_api.csv")
data_api <- read.csv("DATOS_api.csv")
data_api <- read_excel("DATOS_api.xlsx")
data_webs <- read_csv("DATOS_Webscr")
data_webs <- read_csv("DATOS_Webscr.csv")
data_webs <- read_excel("DATOS_Webscr.xlsx")
cbind(data_api,data_webs)
data_api_520<-data_api[c(1:520),]
cbind(data_api_520,data_webs)
View(cbind(data_api_520,data_webs))
names(data_webs)
View(cbind(data_api_520,data_webs[,5:6]))
#REVISIÓN
View(df_sanc_pena[sample(nrow(df_sanc_pena), 10),])
DATA_CONSOLIDADA_520<-cbind(data_api_520,data_webs[,5:6]))
DATA_CONSOLIDADA_520<-cbind(data_api_520,data_webs[,5:6])
#REVISIÓN
View(df_sanc_pena[sample(nrow(DATA_CONSOLIDADA_520), 10),])
#REVISIÓN
View(DATA_CONSOLIDADA_520[sample(nrow(DATA_CONSOLIDADA_520), 10),])
#REVISIÓN
View(DATA_CONSOLIDADA_520[sample(nrow(DATA_CONSOLIDADA_520), 10),])
write.table(DATA_CONSOLIDADA_520, "DATA_CONSOLIDADA_520", sep= ";",row.names=FALSE)
View(data_api)
data_api <- read_excel("DATOS_api.xlsx",col_types = c('date', 'numeric'))
View(data_api)
names(DATA_CONSOLIDADA_520)
convert_date(DATA_CONSOLIDADA_520[3], type = "excel", fraction = TRUE)
####PROBLEMA:FECHAS LO HA LEÍDO EN DÍAS####
#CONVERTIMOS:
library("datetimeutils")
library(datetimeutils)
####PROBLEMA:FECHAS LO HA LEÍDO EN DÍAS####
#CONVERTIMOS:
install.packages("datetimeutils")
library(datetimeutils)
convert_date(DATA_CONSOLIDADA_520[3], type = "excel", fraction = TRUE)
sapply(DATA_CONSOLIDADA_520[3], convert_date, type = "excel", fraction = TRUE)
sapply(DATA_CONSOLIDADA_520[3], convert_date)
sapply(DATA_CONSOLIDADA_520[3], function(x)convert_date(x,type = "excel", fraction = TRUE))
convert_date(DATA_CONSOLIDADA_520[3,1],type = "excel", fraction = TRUE)
convert_date(34324234,type = "excel", fraction = TRUE)
####PROBLEMA:FECHAS LO HA LEÍDO EN DÍAS####
#CONVERTIMOS:
install.packages("janitor")
library(janitor)
View(data_api_520)
View(data_api_520)
excel_numeric_to_date('FECHA DE INSCRIPCIÓN')
#convert_date(34324234,type = "excel", fraction = TRUE)
sapply(DATA_CONSOLIDADA_520[3], function(x)excel_numeric_to_date(x))
#convert_date(34324234,type = "excel", fraction = TRUE)
sapply(DATA_CONSOLIDADA_520[3], excel_numeric_to_date)
class(DATA_CONSOLIDADA_520[3])
class(DATA_CONSOLIDADA_520[1,3])
#convert_date(34324234,type = "excel", fraction = TRUE)
sapply(as.numeric(DATA_CONSOLIDADA_520[3]), excel_numeric_to_date)
#convert_date(34324234,type = "excel", fraction = TRUE)
sapply(DATA_CONSOLIDADA_520[3], function(x)excel_numeric_to_date(as.numeric(x)))
load("D:/Git Hub-BEST/contrataciones-estado-emergencia/Data/sancionesypenalidades.RData")
remove(data0)
for(i in 1:13){remove(paste0(data,as.character("i")))}

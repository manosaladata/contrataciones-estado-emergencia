---
title: "REPORTE DE CONTRATOS DIRECTOS "
subtitle: "Durante el prediodo de emergencia"
author: "Abner Francisco Casallo Trauco"
date: "`r Sys.Date()`"
output: tint::tintHtml
bibliography: skeleton.bib
link-citations: yes
---

```{r setup, include=FALSE}
library(tint)
# invalidate cache when the package version changes
knitr::opts_chunk$set(tidy = FALSE, cache.extra = packageVersion('tint'))
options(htmltools.dir.version = FALSE)
```

# SOBRE LA FUENTE...

```{r fig-nocap-margin-first, fig.margin=T, fig.width=4, fig.height=4, cache=TRUE, echo=FALSE, message=FALSE,comment=FALSE,warning=FALSE}
library(readxl)
library(correlation)
library(tidyverse)
library(esquisse)                        #Gráficos simples sin código.
setwd("D:/GITHUB-PROYECTOS BEST/contrataciones-estado-emergencia/Data")
contr_direc <- read_excel("CONOSCE_CONTRATACIONDIRECTA.xlsx")
#names(contr_direc)
contr_direc[,28]<-sapply(contr_direc[,28],function(x)x/1000000)
names(contr_direc)[28]="MONTO_SOLES_EN_MILLONES"
names(contr_direc)[31]="RUCPROV"
#names(contr_direc)
options(scipen=999)                                  #Evita que salga en notación científica (exponencial).
#sapply(contr_direc, class)                          #Analizamos la clase de cada columna. Ojo: FECHACONVOCATOERIA ESTÁ EN POSIXct y POSIxt q es formato de fecha

boxplot(contr_direc$"MONTO_SOLES_EN_MILLONES")

```


# INTRODUCCIÓN
Este es un breve reporte del análisis exploratorio de los procesos de contratación directa durante el estado de emergencia.
<br>
</br>

## ANÁLISIS DEPARTAMENTAL 

### DE ACUERDO AL NÚMERO DE CONTRATOS

```{r  , cache=TRUE,echo=FALSE, message=FALSE,comment=FALSE,warning=FALSE}

#ANÁLISIS DEPARTAMENTAL
#DE ACUERDO AL NÚMERO DE CONTRATOS

zonas<- select(contr_direc, "ENTIDAD_DEPARTAMENTO","MONTO_SOLES_EN_MILLONES")
zonas2<-group_by(zonas,ENTIDAD_DEPARTAMENTO)
zonas2<-summarise(zonas2,MONTOADJUDICADOSOLES=sum(MONTO_SOLES_EN_MILLONES),num_contr=n())
zonas_num<-arrange(zonas2,desc(num_contr))
zonas_num<-head(zonas_num,5)
knitr::kable(
  zonas_num, caption = 'Departamentos de acuerdo al número de contratos.'
)

```
Lima es el que tiene más contratos, seguido de Ancash, La Libertad, Cajamarca y San Martín.
<br>
</br>

### DE ACUERDO AL MONTO
```{r  , cache=TRUE,echo=FALSE, message=FALSE,comment=FALSE,warning=FALSE}


zonas_monto<-arrange(zonas2,desc(MONTOADJUDICADOSOLES))
zonas_monto<-head(zonas_monto,5)
knitr::kable(
  zonas_monto, caption = 'Departamentos de acuerdo al monto contratado'
)

```

Lima es el que tiene un mayor monto en contrataciones, seguido de San Martín, Cuzco y Ancash.

## ANÁLISIS POR PROVEEDORES (EN GENERAL)

### DE ACUERDO AL NÚMERO DE CONTRATOS
```{r  , cache=TRUE,echo=FALSE, message=FALSE,comment=FALSE,warning=FALSE}

proveedores<- select(contr_direc, "PROVEEDOR","RUCPROV", "TIPOPROVEEDOR","MONTO_SOLES_EN_MILLONES")
proveedores2_num<-group_by(proveedores,PROVEEDOR,RUCPROV)
proveedores2_num<-summarize(proveedores2_num,MONTOADJSOLES= sum(MONTO_SOLES_EN_MILLONES), Contratos=n())
proveedores2_num<-arrange(proveedores2_num,desc(Contratos))
proveedores2_num<-head(proveedores2_num,5)
knitr::kable(
  proveedores2_num, caption = 'Proveedores e acuerdo al número de contratos.'
)

```

### DE ACUERDO AL MONTO
```{r  , cache=TRUE,echo=FALSE, message=FALSE,comment=FALSE,warning=FALSE}


proveedores_monto<-arrange(proveedores2_num,desc(MONTOADJSOLES))
proveedores_monto<-head(proveedores_monto,5)
knitr::kable(
  proveedores_monto, caption = 'Proveedores de acuerdo al monto.'
)

```

¿QUIÉN ES EL NA? VER RUC E INFORMACIÓN EN LA RED.
                             